(function(e){var t=[];var s={init:function(a){return this.each((function(){var n=this;var r=e(n).data("cbdatepicker");if(r){return}r={};r.options=typeof a!="undefined"?a:{};r.defaults=e.fn.cbdatepicker.defaults;r.settings=e.extend(true,{},r.defaults,r.options);r.strings=e.extend(true,{},e.datepicker.regional[""],r.settings.strings);r.element=e(n);r.selector=e(n);if(r.element.is('input[type="hidden"]')){r.selector=r.element.siblings(".cbDatePickerSelector")}if(r.settings.useData){e.each(e.fn.cbdatepicker.dataMap,(function(e,t){const s=r.element.data(t);if(typeof s!="undefined"){r.settings[e]=s}}))}r.element.triggerHandler("cbdatepicker.init.before",[r]);if(!r.settings.init){return}var c=(new Date).getFullYear();if(r.settings.minYear){if(typeof r.settings.minYear=="string"){var l=r.settings.minYear.substr(0,1);var o=r.settings.minYear.substr(1);if(l=="+"){r.settings.minYear=c+parseInt(o)}else if(l=="-"){r.settings.minYear=c-parseInt(o)}}}else{r.settings.minYear=c-99}if(r.settings.maxYear){if(typeof r.settings.maxYear=="string"){var m=r.settings.maxYear.substr(0,1);var d=r.settings.maxYear.substr(1);if(m=="+"){r.settings.maxYear=c+parseInt(d)}else if(m=="-"){r.settings.maxYear=c-parseInt(d)}}}else{r.settings.maxYear=c+99}if(r.settings.calendarType==2||r.settings.calendarType==3){var g=null;if(typeof moment!="undefined"){g=moment.locale();moment.locale(Math.random(),{months:r.strings.monthNames,monthsShort:r.strings.monthNamesShort,weekdays:r.strings.dayNames,weekdaysShort:r.strings.dayNamesShort,weekdaysMin:r.strings.dayNamesMin})}r.combodate=r.selector.combodate({format:r.settings.format,template:r.settings.template,minYear:r.settings.minYear,maxYear:r.settings.maxYear,firstItem:r.settings.firstItem,smartDays:true,yearDescending:r.settings.yearDescending,minuteStep:1,secondStep:1,customClass:r.settings.customClass});if(g){moment.locale(g)}r.selector.siblings(".combodate").children().on("change",(function(t){var s=e(this).val();if(s!==""){e(this).siblings().each((function(){if(!e(this).val()){var t=null;if(e(this).hasClass("year")){t=e(this).children('option[value="'+c+'"]').val()}if(!t){t=e(this).children('option[value!=""]:first').val()}if(t){e(this).val(t)}}}))}else{e(this).siblings().each((function(){e(this).val("")}))}r.element.triggerHandler("cbdatepicker.select",[r,r.selector.combodate("getValue")])}))}if(r.settings.calendarType==1||r.settings.calendarType==4||r.settings.addPopup){if(r.settings.showTime){r.datetimepicker=r.selector.datetimepicker({showAnim:"",showHour:r.settings.timeTemplate.toLowerCase().indexOf("h")!==-1,showMinute:r.settings.timeTemplate.toLowerCase().indexOf("m")!==-1,showSecond:r.settings.timeTemplate.toLowerCase().indexOf("s")!==-1,showMillisec:r.settings.timeTemplate.toLowerCase().indexOf("l")!==-1,showMicrosec:r.settings.timeTemplate.toLowerCase().indexOf("c")!==-1,stepMinute:1,stepSecond:1,altFieldTimeOnly:false,altTimeFormat:r.settings.calendarType==1||r.settings.calendarType==4?r.settings.timeFormat:null,timeFormat:r.settings.calendarType==1||r.settings.calendarType==4?r.settings.timeTemplate:r.settings.timeFormat,pickerTimeFormat:r.settings.timeTemplate,amNames:r.strings.amNames,pmNames:r.strings.pmNames,timeOnly:r.settings.timeOnly,timeOnlyTitle:r.strings.timeOnlyTitle,timeText:r.strings.timeText,hourText:r.strings.hourText,minuteText:r.strings.minuteText,secondText:r.strings.secondText,millisecText:r.strings.millisecText,microsecText:r.strings.microsecText,timezoneText:r.strings.timezoneText,onSelect:function(e){if(r.settings.addPopup){r.selector.combodate("setValue",e)}else{r.selector.change()}if(r.settings.calendarType==4){r.selector.siblings(".cbDatePickerSelected").html(e)}r.element.triggerHandler("cbdatepicker.select",[r,e])},yearRange:r.settings.minYear+":"+r.settings.maxYear,isRTL:r.settings.isRTL,firstDay:r.settings.firstDay,changeMonth:true,changeYear:true,showButtonPanel:false,altField:r.settings.calendarType==1||r.settings.calendarType==4?i(r,r.settings.target):null,altFormat:r.settings.calendarType==1||r.settings.calendarType==4?r.settings.dateFormat:null,dateFormat:r.settings.calendarType==1||r.settings.calendarType==4?r.settings.dateTemplate:r.settings.dateFormat,dayNames:r.strings.dayNames,dayNamesMin:r.strings.dayNamesMin,dayNamesShort:r.strings.dayNamesShort,monthNames:r.strings.monthNames,monthNamesShort:r.strings.monthNamesShort,prevText:r.strings.prevText,nextText:r.strings.nextText,currentText:r.strings.currentText,closeText:r.strings.closeText})}else{r.datepicker=r.selector.datepicker({onSelect:function(e){if(r.settings.addPopup){r.selector.combodate("setValue",e)}else{r.selector.change()}if(r.settings.calendarType==4){r.selector.siblings(".cbDatePickerSelected").html(e)}r.element.triggerHandler("cbdatepicker.select",[r,e])},showAnim:"",yearRange:r.settings.minYear+":"+r.settings.maxYear,isRTL:r.settings.isRTL,firstDay:r.settings.firstDay,changeMonth:true,changeYear:true,showButtonPanel:false,altField:r.settings.calendarType==1||r.settings.calendarType==4?i(r,r.settings.target):null,altFormat:r.settings.calendarType==1||r.settings.calendarType==4?r.settings.dateFormat:null,dateFormat:r.settings.calendarType==1||r.settings.calendarType==4?r.settings.dateTemplate:r.settings.dateFormat,dayNames:r.strings.dayNames,dayNamesMin:r.strings.dayNamesMin,dayNamesShort:r.strings.dayNamesShort,monthNames:r.strings.monthNames,monthNamesShort:r.strings.monthNamesShort,prevText:r.strings.prevText,nextText:r.strings.nextText,currentText:r.strings.currentText,closeText:r.strings.closeText})}}r.calendarHandler=function(t){t.preventDefault();t.stopPropagation();var s=r.selector.datepicker("widget");if(s.not(":visible").length){r.selector.datepicker("show");s.position({my:"left top+20",at:"left top",of:e(this)});if(s.css("z-index")<100){s.css("z-index",100)}}r.element.triggerHandler("cbdatepicker.calendar",[r])};r.selector.siblings(".cbDatePickerCalendar").on("click",r.calendarHandler);r.changeHandler=function(e){i(r,r.settings.target).val(s.get.call(n)).trigger("change")};r.selector.on("change",r.changeHandler);r.element.on("remove.cbdatepicker destroy.cbdatepicker",(function(){r.element.cbdatepicker("destroy")}));r.element.on("rebind.cbdatepicker",(function(){r.element.cbdatepicker("rebind")}));r.element.on("modified.cbdatepicker",(function(e,t,s,i){if(t!=s){var a=r.element.attr("data-cbdatepicker-target");if(typeof a!="undefined"){r.element.attr("data-cbdatepicker-target",a.replace(t,s))}var n=r.element.data("cbdatepicker-target");if(typeof n!="undefined"){r.element.data("cbdatepicker-target",n.replace(t,s))}r.element.cbdatepicker("rebind")}}));r.element.on("cloned.cbdatepicker",(function(){var t=e(this);if(e(this).is('input[type="hidden"]')){t=e(this).siblings(".cbDatePickerSelector")}e(this).off(".cbdatepicker");e(this).removeData("cbdatepicker");t.removeData("combodate");t.removeData("datepicker");t.siblings(".combodate").remove();t.removeClass("hasDatepicker");t.siblings(".cbDatePickerCalendar").off("click",r.calendarHandler);t.off("change",r.changeHandler);e(this).cbdatepicker(r.options)}));r.element.triggerHandler("cbdatepicker.init.after",[r]);r.element.data("cbdatepicker",r);t.push(r)}))},get:function(){var t=e(this).data("cbdatepicker");if(!t){return""}var s="";if(t.settings.calendarType==2||t.settings.calendarType==3){if(t.settings.showTime){s=t.selector.combodate("getValue","YYYY-MM-DD HH:mm:ss")}else{s=t.selector.combodate("getValue","YYYY-MM-DD")}}else if(t.settings.calendarType==1||t.settings.calendarType==4){if(t.settings.showTime){s=t.selector.datetimepicker("getDate");if(s){s=new Date(s).toSQLDateTimeString()}}else{s=t.selector.datepicker("getDate");if(s){s=new Date(s).toSQLDateString()}}}if(s&&typeof moment!="undefined"){var i=false;if(t.settings.showTime&&t.settings.offset){s=s+t.settings.offset;i=true}var a=moment(s);if(!i&&t.settings.showTime&&t.settings.timezone&&t.settings.timezone!="UTC"&&typeof moment.tz!="undefined"){a=moment.tz(s,t.settings.timezone);i=true}if(a.isValid()){if(i){a.utc()}s=a.format(t.settings.format)}else{s=""}}else{s=""}return s},set:function(t){var s=e(this).data("cbdatepicker");if(!s){return this}if(s.settings.calendarType==2||s.settings.calendarType==3){s.selector.combodate("setValue",t)}else if(s.settings.calendarType==1||s.settings.calendarType==4){if(s.settings.showTime){s.selector.datetimepicker("setDate",t)}else{s.selector.datepicker("setDate",t)}}return this},rebind:function(){var t=e(this).data("cbdatepicker");if(!t){return this}t.element.cbdatepicker("destroy");t.element.cbdatepicker(t.options);return this},destroy:function(){var s=e(this).data("cbdatepicker");if(!s){return this}if(s.combodate){s.selector.combodate("destroy")}if(s.datetimepicker){s.selector.datetimepicker("destroy")}if(s.datepicker){s.selector.datepicker("destroy")}s.selector.siblings(".cbDatePickerCalendar").off("click",s.calendarHandler);s.selector.off("change",s.changeHandler);s.element.off(".cbdatepicker");e.each(t,(function(e,i){if(i.element==s.element){t.splice(e,1);return false}return true}));s.element.removeData("cbdatepicker");s.element.triggerHandler("cbdatepicker.destroyed",[s]);return this},instances:function(){return t}};function i(t,s){if(!s){return t.element}if(s.lastIndexOf("~ ",0)===0||s.lastIndexOf("+ ",0)===0||s.lastIndexOf("> ",0)===0||s.lastIndexOf(" ",0)===0){return t.element.find(s.trim())}return e(s)}function a(e){if(e<10){return"0"+e}return e}if(!Date.prototype.toSQLDateString){Date.prototype.toSQLDateString=function(){return this.getFullYear()+"-"+a(this.getMonth()+1)+"-"+a(this.getDate())}}if(!Date.prototype.toSQLDateTimeString){Date.prototype.toSQLDateTimeString=function(){return this.getFullYear()+"-"+a(this.getMonth()+1)+"-"+a(this.getDate())+" "+a(this.getHours())+":"+a(this.getMinutes())+":"+a(this.getSeconds())}}e.fn.cbdatepicker=function(e){if(s[e]){return s[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return s.init.apply(this,arguments)}return this};e.fn.cbdatepicker.dataMap={calendarType:"cbdatepicker-calendartype",template:"cbdatepicker-template",format:"cbdatepicker-format",timeTemplate:"cbdatepicker-timetemplate",dateTemplate:"cbdatepicker-datetemplate",timeFormat:"cbdatepicker-timeformat",dateFormat:"cbdatepicker-dateformat",minYear:"cbdatepicker-minyear",maxYear:"cbdatepicker-maxyear",yearDescending:"cbdatepicker-yeardescending",firstDay:"cbdatepicker-firstday",timeOnly:"cbdatepicker-timeonly",showTime:"cbdatepicker-showtime",addPopup:"cbdatepicker-addpopup",isRTL:"cbdatepicker-isrtl",customClass:"cbdatepicker-customclass",firstItem:"cbdatepicker-firstitem",timezone:"cbdatepicker-timezone",offset:"cbdatepicker-offset",target:"cbdatepicker-target"};e.fn.cbdatepicker.defaults={init:true,useData:true,calendarType:2,template:"MM / DD / YYYY HH : mm : ss",format:"YYYY-MM-DD HH:mm:ss",timeTemplate:"HH:mm:ss",dateTemplate:"yy-mm-dd",timeFormat:"HH:mm:ss",dateFormat:"yy-mm-dd",minYear:"-99",maxYear:"+99",yearDescending:false,firstDay:0,timeOnly:false,showTime:false,addPopup:false,isRTL:false,customClass:null,firstItem:"empty",timezone:null,offset:null,target:null}})(jQuery);