(function(e){var t=[];var s={};var n={init:function(n){return this.each((function(){var l=this;var a=e(l).data("cbselect");if(a||e(l).hasClass("select2")){return}a={};a.type=e(l).prop("multiple")?"multiple":"single";a.options=typeof n!="undefined"?n:{};a.defaults=e.fn.cbselect.defaults;a.settings=e.extend(true,{},a.defaults,a.options);a.element=e(l);if(a.settings.useData){e.each(e.fn.cbselect.dataMap,(function(e,t){const s=a.element.data(t);if(typeof s!="undefined"){a.settings[e]=s}}))}a.element.triggerHandler("cbselect.init.before",[a]);if(!a.settings.init){return}if(a.settings.tags){var i=a.settings.separator;if(!i){i=[","]}a.settings.tokenSeparators=i}if(a.type=="multiple"||a.settings.tags){if(a.settings.width=="calculate"){a.settings.width="auto"}if(a.settings.height=="calculate"){a.settings.height="auto"}}if(a.element.find("option:empty")){a.element.find("option:empty").html("&nbsp;")}var r=null;var c=null;if(a.settings.width=="calculate"||a.settings.height=="calculate"){r=a.element.outerWidth()+50;c=a.element.outerHeight();if(a.element.is(":hidden")){var o=a.element.css("width");var d=a.element.css("height");var f=a.element.clone(false).attr({id:"",class:""}).css({position:"absolute",display:"block",visibility:"hidden",width:"auto",height:"auto",minWidth:o&&o!="0px"?o:"auto",minHeight:d&&d!="0px"?d:"auto",padding:a.element.css("padding"),border:a.element.css("border"),margin:a.element.css("margin"),fontFamily:a.element.css("font-family"),fontSize:a.element.css("font-size"),fontWeight:a.element.css("font-weight"),lineHeight:a.element.css("line-height"),boxSizing:a.element.css("box-sizing"),wordSpacing:a.element.css("word-spacing")}).appendTo("body");r=f.outerWidth()+50;c=f.outerHeight();f.remove()}if(a.settings.width=="calculate"){a.settings.width=r}if(a.settings.height=="calculate"){a.settings.height=c}}if(a.settings.width=="element"){r=a.element.outerWidth();if(!r||r=="0px"){r="auto"}}else if(a.settings.width=="copy"||a.settings.width=="resolve"){r=a.element.css("width");if(!r||r=="0px"){r="auto"}}else if(a.settings.width=="off"){r=null}else if(!r){r=a.settings.width}if(a.settings.height=="element"){c=a.element.outerHeight();if(!c||c=="0px"){c="auto"}}else if(a.settings.height=="copy"||a.settings.height=="resolve"){c=a.element.css("height");if(!c||c=="0px"){c="auto"}}else if(a.settings.height=="off"){c=null}else if(!c){c=a.settings.height}var u=null;if(a.type=="multiple"){if(r=="auto"&&a.settings.placeholder){var m=e("<span>"+a.settings.placeholder+"</span>").css({position:"absolute",display:"block",visibility:"hidden",padding:a.element.css("padding"),border:a.element.css("border"),margin:a.element.css("margin"),fontFamily:a.element.css("font-family"),fontSize:a.element.css("font-size"),fontWeight:a.element.css("font-weight"),lineHeight:a.element.css("line-height"),boxSizing:a.element.css("box-sizing"),wordSpacing:a.element.css("word-spacing")}).appendTo("body");u=m.outerWidth()+5;m.remove()}}else if(a.settings.placeholder){a.settings.allowClear=true}var p=a.element.is('.cbTooltip,[data-hascbtooltip="true"]');if(p){a.element.attr("data-cbtooltip-open-target","~ .select2-container:first");a.element.attr("data-cbtooltip-close-target","~ .select2-container:first");a.element.attr("data-cbtooltip-position-target","~ .select2-container:first");a.element.data("cbtooltip-open-target","~ .select2-container:first");a.element.data("cbtooltip-close-target","~ .select2-container:first");a.element.data("cbtooltip-position-target","~ .select2-container:first")}var g=[];e.each(a.element.attr("class").split(/\s+/),(function(e,t){if(t!="cbTooltip"&&t!="cbSelect"){g.push(t)}}));var h=e.extend(true,{},a.settings);delete h["separator"];delete h["containerCssClass"];delete h["dropdownCssClass"];delete h["selectionCssClass"];if(h["dropdownParent"]&&typeof h["dropdownParent"]==="string"){var b=a.element.closest(h["dropdownParent"]);if(b.length){h["dropdownParent"]=b;if(!a.settings.dropdownCssClass){a.settings.dropdownCssClass="select2-container--fullwidth"}}else{h["dropdownParent"]=null}}if(a.settings.theme=="bootstrap"&&(a.type=="multiple"||a.settings.tags)&&!("templateSelection"in h)){h["templateSelection"]=function(t,s){s.addClass("badge badge-primary");return e.fn.select2.defaults.defaults.templateSelection(t,s)}}if(a.settings.url){a.ajax_url=null;a.ajax_restore=false;a.ajax_term="";a.ajax_page=1;if(a.element.children("optgroup,option").length){h["dataAdapter"]=e.fn.select2.amd.require("select2/data/ajax-extended")}h["ajax"]={url:a.settings.url,data:function(t){return{search:e.trim(t.term||""),page:t.page||1}},dataType:"json",delay:600,cache:true,transport:function(t,s,n){var l=e.ajax(t);if(a.ajax_restore){l.always((function(){a.ajax_restore=false;a.select2.results.loading=false;a.select2.results.lastParams.term=a.ajax_term;a.select2.results.lastParams.page=a.ajax_page;t.term=a.ajax_term;t.page=a.ajax_page}))}else{l.always(s)}return l},beforeSend:function(e,t){a.ajax_url=t.url;if(a.ajax_url in s){return false}a.element.triggerHandler("cbselect.ajax.send",[a,t]);return true},processResults:function(e,t){a.element.triggerHandler("cbselect.ajax.data",[a,e,t]);if(a.ajax_url&&a.ajax_url in s){a.ajax_term=t.term;a.ajax_page=t.page;return s[a.ajax_url]}t.page=t.page||1;if(a.ajax_url){s[a.ajax_url]=e}a.ajax_term=t.term;a.ajax_page=t.page;return e}}}a.element.select2(h);a.select2=a.element.data("select2");a.container=a.select2.$container;a.dropdown=a.select2.$dropdown;a.selection=a.select2.$selection;a.searchable=!(a.settings.minimumResultsForSearch<0||a.element.find("option").length<a.settings.minimumResultsForSearch);if(u){a.selection.css("min-width",u)}e.each(g,(function(e,t){a.container.addClass(t)}));if(a.settings.theme=="bootstrap"){if(!a.settings.tags&&a.container.hasClass("form-control")){a.container.addClass("custom-select");if(a.container.hasClass("form-control-sm")){a.container.addClass("custom-select-sm")}else if(a.container.hasClass("form-control-lg")){a.container.addClass("custom-select-lg")}}a.dropdown.find(".select2-dropdown").addClass("bg-white border");a.dropdown.find(".select2-search__field").addClass("form-control");a.container.find(".select2-search__field").addClass("form-control");if(a.container.hasClass("form-control-sm")){a.dropdown.find(".select2-dropdown").addClass("text-small");a.dropdown.find(".select2-search__field").addClass("form-control-sm");a.container.find(".select2-search__field").addClass("form-control-sm")}else if(a.container.hasClass("form-control-lg")){a.dropdown.find(".select2-dropdown").addClass("text-large");a.dropdown.find(".select2-search__field").addClass("form-control-lg");a.container.find(".select2-search__field").addClass("form-control-lg")}else if(a.settings.url){a.dropdown.find(".select2-search__field").addClass("form-control-sm")}}a.dropdown.addClass("cb_template");if(a.type=="multiple"){a.dropdown.addClass("select2-container--multiple");a.container.addClass("select2-container--multiple")}else{a.dropdown.addClass("select2-container--single");a.container.addClass("select2-container--single")}if(a.settings.tags){a.dropdown.addClass("select2-container--tags");a.container.addClass("select2-container--tags")}a.container.on("click.cbselect",(function(e){if(e.target!==this){return}a.element.cbselect("toggle")})).on("keydown.cbselect",(function(t){if(e(this).hasClass("select2-container--disabled")||e(this).hasClass("select2-container--open")){return}if((t.key=="Down"||t.key=="ArrowDown")&&!t.altKey){var s=a.element.find("option").index(a.element.find("option:selected"));var n=a.element.find("option").slice(s+1).filter(":enabled").first().val();if(typeof n!="undefined"){a.element.val(n).trigger("change")}t.preventDefault()}else if(t.key=="Up"||t.key=="ArrowUp"){var l=a.element.find("option").index(a.element.find("option:selected"));var i=a.element.find("option").slice(0,l).filter(":enabled").last().val();if(typeof i!="undefined"){a.element.val(i).trigger("change")}t.preventDefault()}})).on("keypress.cbselect",(function(t){if(e(this).hasClass("select2-container--disabled")||e(this).hasClass("select2-container--open")){return}if(a.type!="single"||!a.searchable||t.altKey||t.ctrlKey||t.metaKey||t.key.length!==1||!/[a-zA-Z]/.test(t.key)){return}a.element.select2("open");a.dropdown.find(".select2-search > input").val(t.key).trigger("change")}));a.element.on("select2:opening.cbselect",(function(e){if(a.element.hasClass("disabled")||a.element.is(":disabled")||a.container.hasClass("disabled")||a.container.is(":disabled")){e.preventDefault()}if(a.settings.url&&a.ajax_restore){a.dropdown.find(".select2-search > input").val(a.ajax_term)}})).on("select2:open.cbselect",(function(){a.element.triggerHandler("cbselect.open",[a])})).on("select2:close.cbselect",(function(){if(a.settings.url&&!a.settings.tags){a.ajax_restore=true}a.element.triggerHandler("cbselect.close",[a])})).on("select2:select.cbselect",(function(e){if(a.settings.placeholder){a.element.cbselect("unset",a.select2.selection.placeholder.id)}a.element.triggerHandler("cbselect.selecting",[a,e.params.data.id,e.params.data.element])})).on("select2:unselect.cbselect",(function(e){var t=a.element.cbselect("get");if(a.settings.placeholder&&(t===null||Array.isArray(t)&&!t.length)){a.element.cbselect("set",a.select2.selection.placeholder.id)}a.element.triggerHandler("cbselect.removing",[a,e.params.data.id,e.params.data.element])}));if(a.element.hasClass("btn")){a.selection.on("focus.cbselect",(function(){if(e(this).hasClass("select2-container--disabled")){return}a.container.addClass("focus")})).on("blur.cbselect",(function(){a.container.removeClass("focus")}))}a.container.attr("id","cbselect_"+a.element.attr("id"));if(c&&c!="0px"){a.container.css("height",c)}if(a.settings.containerCssClass){a.container.addClass(a.settings.containerCssClass)}if(a.settings.dropdownCssClass){a.dropdown.addClass(a.settings.dropdownCssClass)}if(a.settings.selectionCssClass){a.selection.addClass(a.settings.selectionCssClass)}a.element.on("change.cbselect",(function(){if(typeof cbParamChange!="undefined"){this.dispatchEvent(new Event("cbParamChange"))}}));a.element.on("remove.cbselect destroy.cbselect",(function(){a.element.cbselect("destroy")}));a.element.on("rebind.cbselect",(function(){a.element.cbselect("rebind")}));a.element.on("modified.cbselect",(function(e,t,s,n){if(t!=s){a.element.cbselect("rebind")}}));a.element.on("cloning.cbselect",(function(){e(this).cbselect("destroy");e(this).on("rebind.cbselect",(function(){e(this).off("rebind.cbselect");a.element.cbselect(a.options)}));e(this).on("cloned.cbselect",(function(){e(this).off("cloned.cbselect");e(this).cbselect(a.options)}));return true}));a.element.triggerHandler("cbselect.init.after",[a]);a.element.data("cbselect",a);t.push(a)}))},toggle:function(){var t=e(this).data("cbselect");if(!t){return this}if(t.container.hasClass("select2-container--open")){t.element.select2("close")}else{t.element.select2("open")}return this},open:function(){var t=e(this).data("cbselect");if(!t){return this}t.element.select2("open");return this},close:function(t){var s=e(this).data("cbselect");if(!s){return this}s.element.select2("close");return this},get:function(){var t=e(this).data("cbselect");if(!t){return null}return t.element.val()},set:function(t){var s=e(this).data("cbselect");if(!s){return null}s.element.val(t).trigger("change");return s.element.cbselect("get")},unset:function(t){var s=e(this).data("cbselect");if(!s){return null}if(!e.isArray(t)){t=[t]}var n=s.element.cbselect("get");var l=n;var a=false;if(e.isArray(n)){e.each(t,(function(e,t){if(l.indexOf(t)>-1){l.splice(l.indexOf(t),1);a=true}}))}else{e.each(t,(function(e,t){if(t===n){l="";a=true;return false}}))}if(a){return s.element.cbselect("set",l)}else{return n}},enable:function(){var t=e(this).data("cbselect");if(!t){return this}t.element.prop("disabled",false);return this},disable:function(){var t=e(this).data("cbselect");if(!t){return this}t.element.prop("disabled",true);return this},container:function(){var t=e(this).data("cbselect");if(!t){return this}return t.container},dropdown:function(){var t=e(this).data("cbselect");if(!t){return this}return t.dropdown},rebind:function(){var t=e(this).data("cbselect");if(!t){return this}t.element.cbselect("destroy");t.element.cbselect(t.options);return this},destroy:function(){var s=e(this).data("cbselect");if(!s){return this}s.element.off(".cbselect");s.element.removeData("cbselect");if(s.element.is('.cbTooltip,[data-hascbtooltip="true"]')){s.element.removeAttr("data-cbtooltip-open-target");s.element.removeAttr("data-cbtooltip-close-target");s.element.removeAttr("data-cbtooltip-position-target");s.element.removeData("cbtooltip-open-target");s.element.removeData("cbtooltip-close-target");s.element.removeData("cbtooltip-position-target")}s.element.select2("destroy");e.each(t,(function(e,n){if(n.element==s.element){t.splice(e,1);return false}return true}));s.element.triggerHandler("cbselect.destroyed",[s]);return this},instances:function(){return t}};e.fn.select2.amd.define("select2/data/ajax-extended",["./array","./ajax","./tags","../utils","module","jquery"],(function(e,t,s,n,l,a){function i(e,t){this.minimumInputLength=t.get("minimumInputLength");this.paginationMore=t.get("paginationMore");this.paginationPage=t.get("paginationPage");i.__super__.constructor.call(this,e,t)}n.Extend(i,t);var r=e.prototype.query;var c=t.prototype.query;i.prototype.query=function(e,t){if((!e.term||e.term.length<this.minimumInputLength)&&(e._type&&e._type=="query")){var s=this.$element.data("cbselect");if(s&&s.ajax_restore){s.ajax_restore=false;s.select2.results.loading=false;s.select2.results.lastParams.term=s.ajax_term;s.select2.results.lastParams.page=s.ajax_page;e.term=s.ajax_term;e.page=s.ajax_page;return}var n=this;var l=function(l){if(s){s.ajax_url=null}l["pagination"]={more:n.paginationMore||false,page:n.paginationPage||1};var a=n.processResults(l,e);t(a)};r.call(this,e,l)}else{c.call(this,e,t)}};if(l.config().tags){return n.Decorate(i,s)}else{return i}}));e.fn.cbselect=function(e){if(n[e]){return n[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return n.init.apply(this,arguments)}return this};e.fn.cbselect.dataMap={url:"cbselect-url",tags:"cbselect-tags",separator:"cbselect-separator",placeholder:"cbselect-placeholder",closeOnSelect:"cbselect-close-on-select",selectOnClose:"cbselect-select-on-close",minimumInputLength:"cbselect-minimum-input-length",maximumInputLength:"cbselect-maximum-input-length",maximumSelectionLength:"cbselect-maximum-selection-length",minimumResultsForSearch:"cbselect-minimum-results-for-search",dropdownCssClass:"cbselect-dropdown-css-class",containerCssClass:"cbselect-container-css-class",selectionCssClass:"cbselect-selection-css-class",dropdownAutoWidth:"cbselect-dropdown-auto-width",theme:"cbselect-theme",width:"cbselect-width",height:"cbselect-height"};e.fn.cbselect.defaults={init:true,useData:true,url:null,tags:false,separator:null,placeholder:null,closeOnSelect:true,selectOnClose:false,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,dropdownCssClass:null,containerCssClass:null,selectionCssClass:null,dropdownAutoWidth:true,theme:"bootstrap",width:"calculate",height:"off"}})(jQuery);