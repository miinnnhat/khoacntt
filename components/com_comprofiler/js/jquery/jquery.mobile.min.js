(function(t,i,n){if(typeof define==="function"&&define.amd){define(["jquery"],function(e){n(e,t,i);return e.mobile})}else{n(t.jQuery,t,i)}})(this,document,function(t,a,z,F){(function(e){if(typeof define==="function"&&define.amd){define("vmouse",["jquery"],e)}else{e(t)}})(function(p){var o="virtualMouseBindings",c="virtualTouchID",h="clientX clientY pageX pageY screenX screenY".split(" "),e="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),d=("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),t=p.event.mouseHooks?p.event.mouseHooks.props:[],v=d.concat(t),a={},i=0,s=0,r=0,u=false,f=[],l=false,m=false,g="addEventListener"in z,w=p(z),T=1,b=0,y,n;p.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500,maximumTimeBetweenTouches:100};function D(e){while(e&&typeof e.originalEvent!=="undefined"){e=e.originalEvent}return e}function P(e,t){var i=e.type,n,o,a,s,r,u,c,f,l;e=p.Event(e);e.type=t;n=e.originalEvent;o=d;if(i.search(/^(mouse|click)/)>-1){o=v}if(n){for(c=o.length;c;){s=o[--c];e[s]=n[s]}}if(i.search(/mouse(down|up)|click/)>-1&&!e.which){e.which=1}if(i.search(/^touch/)!==-1){a=D(n);i=a.touches;r=a.changedTouches;u=i&&i.length?i[0]:r&&r.length?r[0]:F;if(u){for(f=0,l=h.length;f<l;f++){s=h[f];e[s]=u[s]}}}return e}function E(e){var t={},i,n;while(e){i=p.data(e,o);for(n in i){if(i[n]){t[n]=t.hasVirtualBinding=true}}e=e.parentNode}return t}function k(e,t){var i;while(e){i=p.data(e,o);if(i&&(!t||i[t])){return e}e=e.parentNode}return null}function X(){m=false}function Y(){m=true}function M(){b=0;f.length=0;l=false;Y()}function x(){X()}function I(){if(i){clearTimeout(i);i=0}}function S(){I();i=setTimeout(function(){i=0;M()},p.vmouse.resetTimerDuration)}function j(e,t,i){var n;if(i&&i[e]||!i&&k(t.target,e)){n=P(t,e);p(t.target).trigger(n)}return n}function q(e){var t=p.data(e.target,c),i;if(e.type==="click"&&p.data(e.target,"lastTouchType")==="touchstart"){setTimeout(function(){if(p.data(e.target,"lastTouchType")==="touchstart"){M();delete p.data(e.target).lastTouchType;q(e)}},p.vmouse.maximumTimeBetweenTouches)}if(!l&&(!b||b!==t)){i=j("v"+e.type,e);if(i){if(i.isDefaultPrevented()){e.preventDefault()}if(i.isPropagationStopped()){e.stopPropagation()}if(i.isImmediatePropagationStopped()){e.stopImmediatePropagation()}}}}function B(e){var t=D(e).touches,i,n,o;if(t&&t.length===1){i=e.target;n=E(i);p.data(e.target,"lastTouchType",e.type);if(n.hasVirtualBinding){b=T++;p.data(i,c,b);I();x();u=false;o=D(e).touches[0];s=o.pageX;r=o.pageY;j("vmouseover",e,n);j("vmousedown",e,n)}}}function L(e){if(m){return}if(!u){j("vmousecancel",e,E(e.target))}p.data(e.target,"lastTouchType",e.type);u=true;S()}function O(e){if(m){return}var t=D(e).touches[0],i=u,n=p.vmouse.moveDistanceThreshold,o=E(e.target);p.data(e.target,"lastTouchType",e.type);u=u||(Math.abs(t.pageX-s)>n||Math.abs(t.pageY-r)>n);if(u&&!i){j("vmousecancel",e,o)}j("vmousemove",e,o);S()}function K(e){if(m||p.data(e.target,"lastTouchType")===F){return}Y();delete p.data(e.target).lastTouchType;var t=E(e.target),i,n;j("vmouseup",e,t);if(!u){i=j("vclick",e,t);if(i&&i.isDefaultPrevented()){n=D(e).changedTouches[0];f.push({touchID:b,x:n.clientX,y:n.clientY});l=true}}j("vmouseout",e,t);u=false;S()}function N(e){var t=p.data(e,o),i;if(t){for(i in t){if(t[i]){return true}}}return false}function R(){}function V(i){var n=i.substr(1);return{setup:function(){if(!N(this)){p.data(this,o,{})}var e=p.data(this,o);e[i]=true;a[i]=(a[i]||0)+1;if(a[i]===1){w.bind(n,q)}p(this).bind(n,R);if(g){a["touchstart"]=(a["touchstart"]||0)+1;if(a["touchstart"]===1){w.bind("touchstart",B).bind("touchend",K).bind("touchmove",O).bind("scroll",L)}}},teardown:function(){--a[i];if(!a[i]){w.unbind(n,q)}if(g){--a["touchstart"];if(!a["touchstart"]){w.unbind("touchstart",B).unbind("touchmove",O).unbind("touchend",K).unbind("scroll",L)}}var e=p(this),t=p.data(this,o);if(t){t[i]=false}e.unbind(n,R);if(!N(this)){e.removeData(o)}}}}for(n=0;n<e.length;n++){p.event.special[e[n]]=V(e[n])}if(g){z.addEventListener("click",function(e){var t=f.length,i=e.target,n,o,a,s,r,u;if(t){n=e.clientX;o=e.clientY;y=p.vmouse.clickDistanceThreshold;a=i;while(a){for(s=0;s<t;s++){r=f[s];u=0;if(a===i&&Math.abs(r.x-n)<y&&Math.abs(r.y-o)<y||p.data(a,c)===r.touchID){e.preventDefault();e.stopPropagation();return}}a=a.parentNode}}},true)}});(function(e){if(typeof define==="function"&&define.amd){define("ns",["jquery"],e)}else{e(t)}})(function(e){e.mobile={version:"@VERSION"};return e.mobile});(function(e){if(typeof define==="function"&&define.amd){define("support/touch",["jquery","../ns"],e)}else{e(t)}})(function(e){var t={touch:"ontouchend"in z};e.mobile.support=e.mobile.support||{};e.extend(e.support,t);e.extend(e.mobile.support,t);return e.support});(function(e){if(typeof define==="function"&&define.amd){define("events/touch",["jquery","../vmouse","../support/touch"],e)}else{e(t)}})(function(c){var f=c(z),e=c.mobile.support.touch,i=e?"touchstart":"mousedown",r=e?"touchend":"mouseup",u=e?"touchmove":"mousemove";c.each(("touchstart touchmove touchend "+"tap taphold "+"swipe swipeleft swiperight").split(" "),function(e,t){c.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)};if(c.attrFn){c.attrFn[t]=true}});function l(e,t,i,n){var o=i.type;i.type=t;if(n){c.event.trigger(i,F,e)}else{c.event.dispatch.call(e,i)}i.type=o}c.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:true,setup:function(){var s=this,r=c(s),u=false;r.bind("vmousedown",function(e){u=false;if(e.which&&e.which!==1){return true}var t=e.target,i,n;function o(){if(i){r.bind("vclick",n);clearTimeout(i)}}function a(){o();r.unbind("vclick",n).unbind("vmouseup",o);f.unbind("vmousecancel",a)}n=function(e){a();if(!u&&t===e.target){l(s,"tap",e)}else if(u){e.preventDefault()}};r.bind("vmouseup",o);f.bind("vmousecancel",a);i=setTimeout(function(){if(!c.event.special.tap.emitTapOnTaphold){u=true}i=0;l(s,"taphold",c.Event("taphold",{target:t}))},c.event.special.tap.tapholdThreshold)})},teardown:function(){c(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup");f.unbind("vmousecancel")}};c.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:a.devicePixelRatio>=2?15:30,verticalDistanceThreshold:a.devicePixelRatio>=2?15:30,getLocation:function(e){var t=a.pageXOffset,i=a.pageYOffset,n=e.clientX,o=e.clientY;if(e.pageY===0&&Math.floor(o)>Math.floor(e.pageY)||e.pageX===0&&Math.floor(n)>Math.floor(e.pageX)){n=n-t;o=o-i}else if(o<e.pageY-i||n<e.pageX-t){n=e.pageX-t;o=e.pageY-i}return{x:n,y:o}},start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,i=c.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[i.x,i.y],origin:c(e.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,i=c.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[i.x,i.y]}},handleSwipe:function(e,t,i,n){if(t.time-e.time<c.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>c.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<c.event.special.swipe.verticalDistanceThreshold){var o=e.coords[0]>t.coords[0]?"swipeleft":"swiperight";l(i,"swipe",c.Event("swipe",{target:n,swipestart:e,swipestop:t}),true);l(i,o,c.Event(o,{target:n,swipestart:e,swipestop:t}),true);return true}return false},eventInProgress:false,setup:function(){var e,a=this,t=c(a),s={};e=c.data(this,"mobile-events");if(!e){e={length:0};c.data(this,"mobile-events",e)}e.length++;e.swipe=s;s.start=function(e){if(c.event.special.swipe.eventInProgress){return}c.event.special.swipe.eventInProgress=true;var t,i=c.event.special.swipe.start(e),n=e.target,o=false;s.move=function(e){if(!i||e.isDefaultPrevented()){return}t=c.event.special.swipe.stop(e);if(!o){o=c.event.special.swipe.handleSwipe(i,t,a,n);if(o){c.event.special.swipe.eventInProgress=false}}if(Math.abs(i.coords[0]-t.coords[0])>c.event.special.swipe.scrollSupressionThreshold){e.preventDefault()}};s.stop=function(){o=true;c.event.special.swipe.eventInProgress=false;f.off(u,s.move);s.move=null};f.on(u,s.move).one(r,s.stop)};t.on(i,s.start)},teardown:function(){var e,t;e=c.data(this,"mobile-events");if(e){t=e.swipe;delete e.swipe;e.length--;if(e.length===0){c.removeData(this,"mobile-events")}}if(t){if(t.start){c(this).off(i,t.start)}if(t.move){f.off(u,t.move)}if(t.stop){f.off(r,t.stop)}}}};c.each({taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(e,t){c.event.special[e]={setup:function(){c(this).bind(t,c.noop)},teardown:function(){c(this).unbind(t)}}});return c.event.special})});